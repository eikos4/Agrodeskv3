{% extends "base.html" %}
{% block title %}Listado de Bodegas{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="text-success mb-4">
    <i class="bi bi-box-seam"></i> Bodegas Registradas
  </h2>

  {% if bodegas %}
  <div class="row row-cols-1 row-cols-md-2 g-4">
    {% for bodega in bodegas %}
    <div class="col">
      <div class="card border-success shadow-sm h-100">
        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
          <strong><i class="bi bi-house-door-fill me-1"></i> {{ bodega.nombre }}</strong>
          <small><i class="bi bi-tree-fill me-1"></i> {{ bodega.huerto.nombre if bodega.huerto else "Sin huerto" }}</small>
        </div>
        <div class="card-body">
          <p><i class="bi bi-geo-alt-fill text-success me-1"></i> <strong>Ubicación:</strong> {{ bodega.ubicacion or "No especificada" }}</p>
          <p><i class="bi bi-person-circle text-success me-1"></i> <strong>Responsable:</strong> {{ bodega.responsable.name if bodega.responsable else 'Sin asignar' }}</p>

          <div class="d-flex flex-wrap gap-2 mt-3">
            <a href="{{ url_for('admin.ver_quimicos', bodega_id=bodega.id) }}" class="btn btn-outline-success btn-sm">
              <i class="bi bi-eye"></i> Ver químicos
            </a>
            <a href="{{ url_for('admin.editar_bodega', bodega_id=bodega.id) }}" class="btn btn-outline-primary btn-sm">
              <i class="bi bi-pencil-square"></i> Editar
            </a>
          </div>
        </div>
        {% if bodega.quimicos|length > 0 %}
        <div class="card-footer bg-light">
          <small><i class="bi bi-flask-fill"></i> Químicos registrados: {{ bodega.quimicos|length }}</small>
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info text-center mt-4">
    <i class="bi bi-info-circle-fill"></i> No hay bodegas registradas aún.
  </div>
  {% endif %}
</div>
{% endblock %}
